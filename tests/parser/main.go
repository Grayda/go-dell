package main

import (
	"encoding/hex"
	"encoding/json"
	"fmt"
	"strings"
)

var IDs = []byte(`
  {
    "MAC": "13b4",
    "Input": "13af",
    "Power": "138a",
    "Name": "13ba",
    "Lamp": "138b",
    "Firmware": "13bf"
  }
  `)

var ids map[string]string

var command = "05000600000300000005000600000300040005000600000300058005000600000300150005000600000300cd9305000600000300ce9305000600000300cf9305000600000300d09305000600000300d19305000600000300d29305000600000300d39305000600000300d49305000600000300d59305000600000300d69305000600000300d79305000600000300d89305000600000300d99305000600000300da9305000600000300db9305000600000300d11305000600000300ee9305000600000300ef1305000600000300f09305000600000300f11305000600000300fc9305000600000300fd1305000600000300fe93050006000003003394050006000003003414050006000003005014050006000003005914050006000003005a94050006000003005b94050006000003005c14050006000003005f94050006000003006014050006000003006394050006000003006414050006000003006d1405000800000514000101130500080000051400150000050008000005141389000005000800000514138a000005000800000514139100000500080000051413920000050008000005141393ffff05000800000514139c00260500080000051413af177705000c0000091513cd035647412d4105000c0000091513ce035647412d420500160000131513cf03436f6d706f7369746520566964656f05000e00000b1513d003532d566964656f05000b0000081513d10348444d490500070000041513d2030500170000141513d303576972656c65737320446973706c617905001200000f1513d40355534220446973706c617905001100000e1513d503555342205669657765720500070000041513d6030500070000041513d7030500070000041513d8030500070000041513d9030500070000041513da030500070000041513db03050009000006151388034f6e050009000006151389034f6e05001200000f15138a034e6f726d616c204d6f646505001000000d1500040332373520486f75727305001000000d15138b0332373520486f75727305000b0000081513910348444d490500130000101513af033139322e3136382e312e31310500140000111513b0033235352e3235352e3235352e3005001200000f1513b1033139322e3136382e312e3105001200000f1513b2033139322e3136382e312e310500180000151513b30342383a41433a36463a44463a45313a45320500070000041513b4030500080000051513b5033505000c0000091513b603343137393405000d00000a1513b9034433333132380500070000041513ba030500070000041513bb0305001100000e1513bd033132383020782038303005000e00000b1513bf03302e302e322e30050006000003003194"

func main() {
	fmt.Println("Starting to parse..")
	json.Unmarshal(IDs, &ids)

	parts := strings.Split(command, "03")
	for _, p := range parts {
		for c := range ids {

			if strings.HasSuffix(p, ids[c]) {
				data := strings.Split(p, "05")[0]
				dec, _ := hex.DecodeString(data)
				fmt.Println(c, "has data of:\t\t", string(dec))
			}
		}
	}
}
